# Maintainer: Drew DeVault <sir@cmpwn.com>
pkgname="python-srht"
pkgver=0.1.0
pkgrel=1
pkgdesc="sr.ht core modules"
arch=("any")
url="https://git.sr.ht/~sircmpwn/srht"
license=("MIT")
depends=("python-flask" "python-sqlalchemy" "python-humanize" "sassc")
makedepends=("python-distribute" "npm")
source=("git+https://git.sr.ht/~sircmpwn/srht.git")
md5sums=('SKIP')

pkgver() {
	cd "${srcdir}/srht"
    git describe --long | sed 's/\([^-]*-g\)/r\1/;s/-/./g'
}

build() {
	cd "${srcdir}/srht"
    cd srht
    npm i
    cd ..
	python ./setup.py build
}

package() {
	cd "${srcdir}/srht"
	python setup.py install --root="$pkgdir" --optimize=1
}

